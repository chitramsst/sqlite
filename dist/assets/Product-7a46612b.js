import{u as v,r as m,n as k}from"./index-35f6dc1b.js";import{f as w}from"./bootstrap.css_vue_type_style_index_0_src_9d2c03db_scoped_9d2c03db_lang-ac967922.js";import{M as y}from"./ProductImageModal-fba55bd4.js";import{_ as S,f as b,o as d,c as f,a as t,g as r,h as c,w as x,v as g,n as h,j as C,F as $,r as j,i as n,k as M,T,t as B}from"./index-cdfdb603.js";import{_ as I}from"./no-image-84bac12a.js";const L={setup(){return{v$:v()}},components:{Cropper:w,Modal:y},data(){return{brandList:[],file:null,name:"",price:"",brand:"",img:"https://images.unsplash.com/photo-1600984575359-310ae7b6bdf2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=700&q=80"}},mounted(){this.getBrandsList()},methods:{async getBrandsList(){try{await this.axios.get(this.$api_url+"product/get-brand-list",{headers:{Token:JSON.parse(localStorage.getItem("user")).token}}).then(s=>{s.data.success==!0&&(this.brandList=s.data.data)})}catch(s){console.log("kkk"+s)}},showImage(s){this.file=s;var e=URL.createObjectURL(s),a=document.querySelector("#photo");a.src=e},resetData(){this.image={src:null,type:null,name:null},this.name="",this.price="",this.brand="";var s=document.querySelector("#photo");s.src="/src/assets/no-image.jpg",this.v$.$reset()},loadImage(s){this.$refs.samplemodal.showUniqueModal(s)},async save(){if(!await this.v$.$validate())return;let e=new FormData;e.append("name",this.name),e.append("price",this.price),e.append("brand_id",this.brand),this.file&&(console.log(this.file),e.append("image",this.file,"test.jpg"));try{await this.axios.post(this.$api_url+"product/save",e,{method:"POST",headers:{Token:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"multipart/form-data"}}).then(a=>{a.data.success==!0&&(this.$toast.info("Product Saved Successfully"),this.$nextTick(()=>{this.resetData()}))})}catch(a){console.log("kkk"+a)}}},validations(){return{name:{required:m},price:{required:m,numeric:k},brand:{required:m}}}},U={class:"shadow-2xl w-[100%] min-h-[30%] rounded-3xl"},D=t("h1",{class:"w-full text-left p-5 text-2xl font-bold text-black/50"}," Product Management ",-1),P={class:"grid grid-cols-2 gap-10"},V={class:"flex flex-col w-full p-5 space-y-5"},N={class:"flex flex-col w-full p-5 space-y-5"},q={class:"flex flex-col w-full px-5 space-y-5"},F=t("option",{value:""},"choose brand",-1),O=["value"],E={class:"flex flex-col w-full px-5 space-y-5"},J={class:"flex w-full"},R={class:"w-2/6 text-center flex items-center justify-center"},z=t("div",{class:"w-2/6 border-2 rounded-lg border-slate-200 h-100 w-100 justify-center items-center flex"},[t("img",{id:"photo",src:I,class:"object-fit h-500 w-500"})],-1),H={class:"flex items-center justify-end w-full p-10 space-x-10"},Q=t("button",{class:"rounded-xl px-10 font-bold text-md bg-red-800/90"}," Cancel ",-1);function W(s,e,a,u,l,p){const i=b("lable"),_=b("Modal");return d(),f("div",U,[D,t("div",P,[t("div",V,[r(i,{class:"text-black/50 font-medium text-xl"},{default:c(()=>[n(" Name ")]),_:1}),x(t("input",{type:"text",class:h(["h-15 w-full rounded-xl focus:border-stone-500 focus:ring-0 focus:inline-block text-xl text-black/50",u.v$.name.$error?"dark:border-red-500":""]),placeholder:"Enter name","onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o)},null,2),[[g,l.name]])]),t("div",N,[r(i,{class:"text-black/50 font-medium text-xl"},{default:c(()=>[n(" Price ")]),_:1}),x(t("input",{type:"text",class:h(["h-15 w-full rounded-xl focus:border-stone-500 focus:ring-0 focus:inline-block text-xl text-black/50",u.v$.price.$error?"dark:border-red-500":""]),placeholder:"Enter Price","onUpdate:modelValue":e[1]||(e[1]=o=>l.price=o)},null,2),[[g,l.price]])]),t("div",q,[r(i,{class:"text-black/50 font-medium text-xl"},{default:c(()=>[n(" Brand ")]),_:1}),x(t("select",{class:h(["h-15 w-full rounded-xl text-xl text-black/50 focus:border-stone-500 focus:ring-0 focus:inline-block",u.v$.brand.$error?"dark:border-red-500":""]),"onUpdate:modelValue":e[2]||(e[2]=o=>l.brand=o),placeholder:"choose brand"},[F,(d(!0),f($,null,j(l.brandList,o=>(d(),f("option",{value:o._id},B(o.name),9,O))),256))],2),[[C,l.brand]])]),t("div",E,[r(i,{class:"text-black/50 font-medium text-xl"},{default:c(()=>[n(" Image")]),_:1}),t("div",J,[t("div",R,[t("button",{class:"upload-example__button bg-blue-700 hover:bg-blue-400 focus:bg-blue-400",onClick:e[4]||(e[4]=o=>s.$refs.file.click())},[t("input",{ref:"file",type:"file",accept:"image/*",onChange:e[3]||(e[3]=o=>p.loadImage(o))},null,544),n(" Upload image ")])]),z,(d(),M(T,{to:"#app1"},[r(_,{ref:"samplemodal",onDisplayImage:e[5]||(e[5]=o=>p.showImage(o))},null,512)]))])])]),t("div",H,[t("button",{class:"rounded-xl px-10 font-bold text-md bg-gray-800/70",onClick:e[6]||(e[6]=o=>p.save())}," Save "),Q])])}const Z=S(L,[["render",W]]);export{Z as default};
